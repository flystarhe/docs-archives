title: 时间序列的数据准备算法
date: 2017-04-01
tags: [序列数据,数据预处理]
---
时间序列（Time Series）是我们在日常生活和社会工作中十分常见的一种数据，它是通过将一系列时间点上的观测值按等时间间隔测量来获取的数据集合，比如商业活动中，服装公司的年销售量，日股票的收盘价格等等，因此对时间序列的研究存在于各行各业。本系列文章旨在对当前大数据环境下的时间序列数据的数据准备、探索、建模以及预测方法进行全面的介绍。

<!--more-->
## 数据分组
分组操作发生在对数据进行缺失值的处理之前，简单的说，它就是依据一定的准则和分组函数，将相关的数据分组为一系列的时间序列，是聚合操作的一种特例。

例如，当用户指定的时间间隔为月时，该功能将会对同一个月的多个日期进行分组处理。

数据准备算法支持5种分组函数，分别是均值(MEAN)，求和(SUM)，众数(MODE)，最小值(MIN)以及最大值(MAX)。对于交易性数据，默认分组函数为求和，普通数据类型，默认分组函数为均值。

## 数据聚合
当用户输入数据的输入时间间隔短于输出时间间隔或者用户输入的为交易型数据时，数据将会被进行聚合处理。

例如，用户的输入时间间隔为日，输出时间间隔为月。对于时间间隔为年类型的数据，时间将从每一年的一月一日开始；对于时间间隔为月类型的数据，时间将从该月的一日开始；对于时间间隔为日类型的数据，时间将从每一日的零时零分零秒开始。

当聚合操作发生后，数据本身的周期也将随着新的时间间隔而发生变化，同样的，聚合操作也支持5种聚合函数，分别是均值(MEAN)，求和(SUM)，众数(MODE)，最小值(MIN)以及最大值(MAX)。

## 数据分散
相反的，当用户输入数据的输入时间间隔长于输出时间间隔时，数据将会被分散到低一级的时间间隔。

例如，当用户的输入时间间隔为季，输出时间间隔为月时，数据将会被分散，分散操作支持两种函数，分别是均值(MEAN)以及求和(SUM)。

## 数据质量检查
为了保证数据建模和预测更加的有效，该算法在对数据进行分组、聚合或者分散操作的基础上，进一步对数据的质量进行了有效的衡量和评价。具体来讲，数据准备算法会对每一个输入数据的有效记录，缺失值数据，零值数据的个数进行统计，并对输出数据的缺失值、空值、聚合单元数等进行统计，进而基于以上统计量对数据质量进行打分，依照打分结果对数据进行筛选。

## 缺失值处理
在通常的数据采集过程中，用户得到的数据往往并不完备，会存在大量的缺失值，缺失值的存在对时间序列的进一步分析有极大的影响，它会降低数据模型的准确性甚至令预测模型失效，所以缺失值处理是数据准备算法中非常重要的一步。

数据准备算法会基于对输入时间间隔的分组的结果进行缺失值处理，也就是说会在聚合和分散操作之前进行。数据准备算法支持五种对缺失值进行估算的方法：

+ Linear interpolation
+ Series mean
+ Mean of nearby points
+ Median of nearby points
+ Linear trend

## 参考资料：
- [大数据下时间序列数据的数据准备](https://www.ibm.com/developerworks/cn/analytics/library/ba-cn-bigdata-time-series-analysis1/index.html)